{
  "name": "Content Distribution Hub",
  "nodes": [
    {
      "parameters": {
        "path": "publish-content",
        "httpMethod": "POST",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-content-input",
      "name": "Content Submission Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1.1,
      "position": [
        240,
        400
      ],
      "webhookId": "content-submission"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "content-title",
              "name": "title",
              "value": "={{ $json.title }}",
              "type": "string"
            },
            {
              "id": "content-body",
              "name": "content",
              "value": "={{ $json.content || $json.body || $json.text }}",
              "type": "string"
            },
            {
              "id": "content-tags",
              "name": "tags",
              "value": "={{ $json.tags || [] }}",
              "type": "array"
            },
            {
              "id": "target-platforms",
              "name": "platforms",
              "value": "={{ $json.platforms || ['linkedin', 'twitter', 'medium', 'devto'] }}",
              "type": "array"
            },
            {
              "id": "schedule-mode",
              "name": "schedule_mode",
              "value": "={{ $json.schedule_mode || 'optimal' }}",
              "type": "string"
            },
            {
              "id": "author-name",
              "name": "author",
              "value": "={{ $json.author || 'Content Creator' }}",
              "type": "string"
            },
            {
              "id": "content-id",
              "name": "content_id",
              "value": "={{ 'CONTENT-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9).toUpperCase() }}",
              "type": "string"
            },
            {
              "id": "submitted-at",
              "name": "submitted_at",
              "value": "={{ $now.toISO() }}",
              "type": "string"
            },
            {
              "id": "image-url",
              "name": "image_url",
              "value": "={{ $json.image_url || $json.image || '' }}",
              "type": "string"
            },
            {
              "id": "cta-url",
              "name": "cta_url",
              "value": "={{ $json.cta_url || $json.link || '' }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "normalize-content",
      "name": "Normalize Content Data",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [
        460,
        400
      ]
    },
    {
      "parameters": {
        "model": "claude-sonnet-4-20250514",
        "options": {
          "temperature": 0.7,
          "maxTokens": 2000
        },
        "text": "=Analyze this content and provide optimization recommendations:\n\nTitle: {{ $json.title }}\nContent: {{ $json.content }}\nTags: {{ $json.tags.join(', ') }}\n\nProvide your analysis in this EXACT JSON format (no markdown, no extra text):\n{\n  \"content_type\": \"article|tutorial|announcement|insight|story|thread\",\n  \"tone\": \"professional|casual|technical|inspirational|educational\",\n  \"target_audience\": \"developers|marketers|entrepreneurs|executives|general\",\n  \"key_topics\": [\"topic1\", \"topic2\", \"topic3\"],\n  \"sentiment\": \"positive|neutral|informative|controversial\",\n  \"estimated_read_time\": 3,\n  \"seo_keywords\": [\"keyword1\", \"keyword2\", \"keyword3\"],\n  \"suggested_platforms\": [\"linkedin\", \"twitter\", \"medium\", \"devto\"],\n  \"optimal_posting_times\": {\n    \"linkedin\": \"2025-01-08T09:00:00Z\",\n    \"twitter\": \"2025-01-08T14:00:00Z\",\n    \"medium\": \"2025-01-08T06:00:00Z\",\n    \"devto\": \"2025-01-08T10:00:00Z\"\n  },\n  \"engagement_prediction\": \"high|medium|low\",\n  \"content_quality_score\": 85,\n  \"improvement_suggestions\": [\"suggestion1\", \"suggestion2\"]\n}\n\nIMPORTANT: Return ONLY valid JSON, no explanations, no markdown code blocks."
      },
      "id": "ai-content-analysis",
      "name": "AI Content Analysis",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1,
      "position": [
        680,
        400
      ],
      "credentials": {
        "anthropicApi": {
          "id": "anthropic-api",
          "name": "Anthropic API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Parse AI analysis and prepare for distribution\nconst items = $input.all();\nconst processedContent = [];\n\nfor (const item of items) {\n  const data = item.json;\n  \n  // Parse AI analysis\n  let aiAnalysis;\n  try {\n    let aiText = data.output || data.response || data.text || '{}';\n    aiText = aiText.replace(/```json\\n?/g, '').replace(/```\\n?/g, '').trim();\n    aiAnalysis = JSON.parse(aiText);\n  } catch (error) {\n    console.error('Failed to parse AI analysis:', error);\n    aiAnalysis = {\n      content_type: 'article',\n      tone: 'professional',\n      target_audience: 'general',\n      key_topics: [],\n      sentiment: 'neutral',\n      estimated_read_time: 5,\n      seo_keywords: [],\n      suggested_platforms: ['linkedin', 'twitter', 'medium', 'devto'],\n      optimal_posting_times: {},\n      engagement_prediction: 'medium',\n      content_quality_score: 70,\n      improvement_suggestions: []\n    };\n  }\n  \n  // Calculate optimal posting times if not provided by AI\n  const now = new Date();\n  if (!aiAnalysis.optimal_posting_times || Object.keys(aiAnalysis.optimal_posting_times).length === 0) {\n    const linkedinTime = new Date(now);\n    linkedinTime.setHours(9, 0, 0, 0); // 9 AM - B2B peak\n    if (linkedinTime < now) linkedinTime.setDate(linkedinTime.getDate() + 1);\n    \n    const twitterTime = new Date(now);\n    twitterTime.setHours(14, 0, 0, 0); // 2 PM - Engagement peak\n    if (twitterTime < now) twitterTime.setDate(twitterTime.getDate() + 1);\n    \n    const mediumTime = new Date(now);\n    mediumTime.setHours(6, 0, 0, 0); // 6 AM - Morning readers\n    if (mediumTime < now) mediumTime.setDate(mediumTime.getDate() + 1);\n    \n    const devtoTime = new Date(now);\n    devtoTime.setHours(10, 0, 0, 0); // 10 AM - Developer coffee time\n    if (devtoTime < now) devtoTime.setDate(devtoTime.getDate() + 1);\n    \n    aiAnalysis.optimal_posting_times = {\n      linkedin: linkedinTime.toISOString(),\n      twitter: twitterTime.toISOString(),\n      medium: mediumTime.toISOString(),\n      devto: devtoTime.toISOString()\n    };\n  }\n  \n  // Determine immediate vs scheduled posting\n  const schedule_mode = data.schedule_mode || 'optimal';\n  const should_post_immediately = schedule_mode === 'immediate';\n  \n  processedContent.push({\n    json: {\n      ...data,\n      ...aiAnalysis,\n      should_post_immediately: should_post_immediately,\n      processed_at: new Date().toISOString()\n    }\n  });\n}\n\nreturn processedContent;"
      },
      "id": "content-processor",
      "name": "Content Processor",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        900,
        400
      ]
    },
    {
      "parameters": {
        "model": "claude-sonnet-4-20250514",
        "options": {
          "temperature": 0.8,
          "maxTokens": 3000
        },
        "text": "=Optimize this content for LINKEDIN (professional network):\n\nOriginal Title: {{ $json.title }}\nOriginal Content: {{ $json.content }}\nTarget Audience: {{ $json.target_audience }}\nTone: {{ $json.tone }}\nKey Topics: {{ $json.key_topics.join(', ') }}\n\nLinkedIn formatting requirements:\n- Maximum 3,000 characters (aim for 1,300 for best engagement)\n- Professional tone\n- Use line breaks for readability (double line breaks between paragraphs)\n- Include relevant hashtags (3-5 max)\n- Strong hook in first 2 lines\n- Add call-to-action at the end\n- Use emojis sparingly (1-3 max, only if appropriate)\n- Format lists with ‚Ä¢ bullets or numbered points\n\nProvide the optimized content in this EXACT format:\n{\n  \"title\": \"Engaging title for LinkedIn\",\n  \"body\": \"Full optimized post content with proper formatting and line breaks\",\n  \"hashtags\": [\"#hashtag1\", \"#hashtag2\", \"#hashtag3\"],\n  \"cta\": \"Call to action text\"\n}\n\nIMPORTANT: Return ONLY valid JSON. In the body, use \\n\\n for paragraph breaks."
      },
      "id": "format-linkedin",
      "name": "Format for LinkedIn",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1,
      "position": [
        1120,
        200
      ],
      "credentials": {
        "anthropicApi": {
          "id": "anthropic-api",
          "name": "Anthropic API"
        }
      }
    },
    {
      "parameters": {
        "model": "claude-sonnet-4-20250514",
        "options": {
          "temperature": 0.8,
          "maxTokens": 1500
        },
        "text": "=Optimize this content for TWITTER/X:\n\nOriginal Title: {{ $json.title }}\nOriginal Content: {{ $json.content }}\nTarget Audience: {{ $json.target_audience }}\nTone: {{ $json.tone }}\n\nTwitter requirements:\n- Create a THREAD (5-8 tweets)\n- Each tweet max 280 characters\n- Tweet 1: Strong hook that grabs attention\n- Tweets 2-7: Break down main points\n- Last tweet: Call to action and link\n- Use emojis for engagement\n- Include relevant hashtags (2-3 per tweet)\n- Use numbers/bullets where appropriate\n- Conversational and engaging tone\n\nProvide the thread in this EXACT format:\n{\n  \"thread\": [\n    {\"text\": \"Tweet 1 text here\", \"hashtags\": [\"#hashtag1\"]},\n    {\"text\": \"Tweet 2 text here\", \"hashtags\": [\"#hashtag2\"]},\n    {\"text\": \"Tweet 3 text here\", \"hashtags\": []}\n  ]\n}\n\nIMPORTANT: Return ONLY valid JSON. Each tweet must be under 280 characters INCLUDING hashtags."
      },
      "id": "format-twitter",
      "name": "Format for Twitter",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1,
      "position": [
        1120,
        340
      ],
      "credentials": {
        "anthropicApi": {
          "id": "anthropic-api",
          "name": "Anthropic API"
        }
      }
    },
    {
      "parameters": {
        "model": "claude-sonnet-4-20250514",
        "options": {
          "temperature": 0.7,
          "maxTokens": 4000
        },
        "text": "=Optimize this content for MEDIUM (long-form articles):\n\nOriginal Title: {{ $json.title }}\nOriginal Content: {{ $json.content }}\nTarget Audience: {{ $json.target_audience }}\nTone: {{ $json.tone }}\nKey Topics: {{ $json.key_topics.join(', ') }}\n\nMedium formatting requirements:\n- Compelling title (with subtitle)\n- Well-structured with clear sections\n- Use H2 (##) and H3 (###) headers\n- Include introduction and conclusion\n- Add pull quotes for key insights\n- Minimum 500 words, ideal 1,500-2,000\n- Use bold and italic for emphasis\n- Add relevant tags (5 max)\n- SEO-optimized\n\nProvide the optimized article in this EXACT format:\n{\n  \"title\": \"Main title\",\n  \"subtitle\": \"Compelling subtitle\",\n  \"content\": \"Full article in Markdown format with ## headers, **bold**, *italic*, > quotes\",\n  \"tags\": [\"tag1\", \"tag2\", \"tag3\", \"tag4\", \"tag5\"]\n}\n\nIMPORTANT: Return ONLY valid JSON. Use proper Markdown in content field."
      },
      "id": "format-medium",
      "name": "Format for Medium",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1,
      "position": [
        1120,
        480
      ],
      "credentials": {
        "anthropicApi": {
          "id": "anthropic-api",
          "name": "Anthropic API"
        }
      }
    },
    {
      "parameters": {
        "model": "claude-sonnet-4-20250514",
        "options": {
          "temperature": 0.7,
          "maxTokens": 4000
        },
        "text": "=Optimize this content for DEV.TO (developer community):\n\nOriginal Title: {{ $json.title }}\nOriginal Content: {{ $json.content }}\nTarget Audience: {{ $json.target_audience }}\nTone: {{ $json.tone }}\nKey Topics: {{ $json.key_topics.join(', ') }}\n\nDEV.to formatting requirements:\n- Technical and developer-focused\n- Clear title (no clickbait)\n- Use code blocks for technical content (```language)\n- Include examples and demos\n- Proper Markdown formatting\n- Add relevant tags (4 max)\n- Include summary/TL;DR\n- Use images/diagrams if explaining concepts\n- Conversational but technical\n\nProvide the optimized article in this EXACT format:\n{\n  \"title\": \"Clear technical title\",\n  \"content\": \"Full article in Markdown with ```code blocks```, ## headers, **bold**, *italic*\",\n  \"tags\": [\"tag1\", \"tag2\", \"tag3\", \"tag4\"],\n  \"canonical_url\": \"{{ $json.cta_url || '' }}\",\n  \"published\": false\n}\n\nIMPORTANT: Return ONLY valid JSON. Use proper Markdown with code blocks in content."
      },
      "id": "format-devto",
      "name": "Format for DEV.to",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1,
      "position": [
        1120,
        620
      ],
      "credentials": {
        "anthropicApi": {
          "id": "anthropic-api",
          "name": "Anthropic API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Parse all formatted content and merge\nconst contentData = $('Content Processor').first().json;\nconst linkedinRaw = $('Format for LinkedIn').first().json.output || '{}';\nconst twitterRaw = $('Format for Twitter').first().json.output || '{}';\nconst mediumRaw = $('Format for Medium').first().json.output || '{}';\nconst devtoRaw = $('Format for DEV.to').first().json.output || '{}';\n\n// Parse JSON responses\nfunction parseJSON(text) {\n  try {\n    const cleaned = text.replace(/```json\\n?/g, '').replace(/```\\n?/g, '').trim();\n    return JSON.parse(cleaned);\n  } catch (e) {\n    console.error('JSON parse error:', e);\n    return {};\n  }\n}\n\nconst linkedin = parseJSON(linkedinRaw);\nconst twitter = parseJSON(twitterRaw);\nconst medium = parseJSON(mediumRaw);\nconst devto = parseJSON(devtoRaw);\n\nreturn [{\n  json: {\n    ...contentData,\n    formatted_content: {\n      linkedin: {\n        title: linkedin.title || contentData.title,\n        body: linkedin.body || contentData.content,\n        hashtags: linkedin.hashtags || [],\n        cta: linkedin.cta || '',\n        scheduled_time: contentData.optimal_posting_times?.linkedin || new Date().toISOString()\n      },\n      twitter: {\n        thread: twitter.thread || [{text: contentData.content.substring(0, 250)}],\n        scheduled_time: contentData.optimal_posting_times?.twitter || new Date().toISOString()\n      },\n      medium: {\n        title: medium.title || contentData.title,\n        subtitle: medium.subtitle || '',\n        content: medium.content || contentData.content,\n        tags: medium.tags || contentData.tags || [],\n        scheduled_time: contentData.optimal_posting_times?.medium || new Date().toISOString()\n      },\n      devto: {\n        title: devto.title || contentData.title,\n        content: devto.content || contentData.content,\n        tags: devto.tags || contentData.tags || [],\n        published: devto.published || false,\n        canonical_url: devto.canonical_url || contentData.cta_url || '',\n        scheduled_time: contentData.optimal_posting_times?.devto || new Date().toISOString()\n      }\n    }\n  }\n}];"
      },
      "id": "merge-formatted-content",
      "name": "Merge Formatted Content",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1340,
        400
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "post-immediately",
              "leftValue": "={{ $json.should_post_immediately }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "true"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "post-now-or-schedule",
      "name": "Post Now or Schedule?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        1560,
        400
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.linkedin.com/v2/ugcPosts",
        "authentication": "genericCredentialType",
        "genericAuthType": "oAuth2Api",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "X-Restli-Protocol-Version",
              "value": "2.0.0"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"author\": \"urn:li:person:YOUR_LINKEDIN_ID\",\n  \"lifecycleState\": \"PUBLISHED\",\n  \"specificContent\": {\n    \"com.linkedin.ugc.ShareContent\": {\n      \"shareCommentary\": {\n        \"text\": \"{{ $json.formatted_content.linkedin.body }}\\n\\n{{ $json.formatted_content.linkedin.hashtags.join(' ') }}\"\n      },\n      \"shareMediaCategory\": \"NONE\"\n    }\n  },\n  \"visibility\": {\n    \"com.linkedin.ugc.MemberNetworkVisibility\": \"PUBLIC\"\n  }\n}",
        "options": {}
      },
      "id": "post-to-linkedin",
      "name": "Post to LinkedIn",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        1780,
        200
      ],
      "credentials": {
        "oAuth2Api": {
          "id": "linkedin-oauth",
          "name": "LinkedIn OAuth2"
        }
      }
    },
    {
      "parameters": {
        "resource": "tweet",
        "operation": "create",
        "text": "={{ $json.formatted_content.twitter.thread[0].text }}",
        "additionalFields": {}
      },
      "id": "post-to-twitter-1",
      "name": "Post to Twitter (Thread Start)",
      "type": "n8n-nodes-base.twitter",
      "typeVersion": 2,
      "position": [
        1780,
        320
      ],
      "credentials": {
        "twitterOAuth2Api": {
          "id": "twitter-oauth",
          "name": "Twitter OAuth2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Post remaining tweets in thread\nconst thread = $json.formatted_content.twitter.thread;\nconst firstTweetId = $('Post to Twitter (Thread Start)').first().json.id_str;\n\nconst results = [];\nlet previousTweetId = firstTweetId;\n\n// Post tweets 2 through end\nfor (let i = 1; i < thread.length; i++) {\n  const tweet = thread[i];\n  \n  // Note: This would need actual Twitter API calls\n  // For now, we'll prepare the data\n  results.push({\n    json: {\n      tweet_number: i + 1,\n      text: tweet.text,\n      hashtags: tweet.hashtags || [],\n      reply_to: previousTweetId,\n      status: 'ready_to_post'\n    }\n  });\n}\n\nreturn results;"
      },
      "id": "prepare-twitter-thread",
      "name": "Prepare Twitter Thread",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2000,
        320
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.medium.com/v1/users/YOUR_MEDIUM_USER_ID/posts",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"title\": \"{{ $json.formatted_content.medium.title }}\",\n  \"contentFormat\": \"markdown\",\n  \"content\": \"{{ $json.formatted_content.medium.content }}\",\n  \"tags\": {{ JSON.stringify($json.formatted_content.medium.tags) }},\n  \"publishStatus\": \"public\",\n  \"canonicalUrl\": \"{{ $json.cta_url || '' }}\"\n}",
        "options": {}
      },
      "id": "post-to-medium",
      "name": "Post to Medium",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        1780,
        440
      ],
      "credentials": {
        "httpHeaderAuth": {
          "id": "medium-api-key",
          "name": "Medium Integration Token"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://dev.to/api/articles",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"article\": {\n    \"title\": \"{{ $json.formatted_content.devto.title }}\",\n    \"body_markdown\": \"{{ $json.formatted_content.devto.content }}\",\n    \"published\": {{ $json.formatted_content.devto.published }},\n    \"tags\": {{ JSON.stringify($json.formatted_content.devto.tags) }},\n    \"canonical_url\": \"{{ $json.formatted_content.devto.canonical_url }}\"\n  }\n}",
        "options": {}
      },
      "id": "post-to-devto",
      "name": "Post to DEV.to",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        1780,
        560
      ],
      "credentials": {
        "httpHeaderAuth": {
          "id": "devto-api-key",
          "name": "DEV.to API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "YOUR_AIRTABLE_BASE_ID",
          "mode": "list",
          "cachedResultName": "Content Hub"
        },
        "table": {
          "__rl": true,
          "value": "Published_Content",
          "mode": "list",
          "cachedResultName": "Published Content"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "content_id": "={{ $json.content_id }}",
            "title": "={{ $json.title }}",
            "author": "={{ $json.author }}",
            "content_type": "={{ $json.content_type }}",
            "platforms": "={{ $json.platforms.join(', ') }}",
            "linkedin_posted": "Yes",
            "twitter_posted": "Yes",
            "medium_posted": "Yes",
            "devto_posted": "Yes",
            "linkedin_url": "={{ $('Post to LinkedIn').first().json.id || '' }}",
            "twitter_url": "={{ $('Post to Twitter (Thread Start)').first().json.id_str || '' }}",
            "medium_url": "={{ $('Post to Medium').first().json.data?.url || '' }}",
            "devto_url": "={{ $('Post to DEV.to').first().json.url || '' }}",
            "submitted_at": "={{ $json.submitted_at }}",
            "published_at": "={{ $now.toISO() }}",
            "status": "Published",
            "engagement_prediction": "={{ $json.engagement_prediction }}",
            "quality_score": "={{ $json.content_quality_score }}"
          },
          "matchingColumns": [],
          "schema": []
        },
        "options": {}
      },
      "id": "save-published-immediate",
      "name": "Save Published Content",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2,
      "position": [
        2220,
        300
      ],
      "credentials": {
        "airtableTokenApi": {
          "id": "airtable-api",
          "name": "Airtable API"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "YOUR_AIRTABLE_BASE_ID",
          "mode": "list",
          "cachedResultName": "Content Hub"
        },
        "table": {
          "__rl": true,
          "value": "Scheduled_Content",
          "mode": "list",
          "cachedResultName": "Scheduled Content"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "content_id": "={{ $json.content_id }}",
            "title": "={{ $json.title }}",
            "author": "={{ $json.author }}",
            "content_type": "={{ $json.content_type }}",
            "platforms": "={{ $json.platforms.join(', ') }}",
            "linkedin_scheduled": "={{ $json.formatted_content.linkedin.scheduled_time }}",
            "twitter_scheduled": "={{ $json.formatted_content.twitter.scheduled_time }}",
            "medium_scheduled": "={{ $json.formatted_content.medium.scheduled_time }}",
            "devto_scheduled": "={{ $json.formatted_content.devto.scheduled_time }}",
            "formatted_content_json": "={{ JSON.stringify($json.formatted_content) }}",
            "submitted_at": "={{ $json.submitted_at }}",
            "status": "Scheduled",
            "engagement_prediction": "={{ $json.engagement_prediction }}",
            "quality_score": "={{ $json.content_quality_score }}"
          },
          "matchingColumns": [],
          "schema": []
        },
        "options": {}
      },
      "id": "save-scheduled-content",
      "name": "Save Scheduled Content",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2,
      "position": [
        1780,
        700
      ],
      "credentials": {
        "airtableTokenApi": {
          "id": "airtable-api",
          "name": "Airtable API"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "minutes",
              "minutesInterval": 15
            }
          ]
        }
      },
      "id": "scheduled-content-checker",
      "name": "Scheduled Content Checker",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.1,
      "position": [
        240,
        900
      ],
      "webhookId": "schedule-checker"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "YOUR_AIRTABLE_BASE_ID",
          "mode": "list",
          "cachedResultName": "Content Hub"
        },
        "table": {
          "__rl": true,
          "value": "Scheduled_Content",
          "mode": "list",
          "cachedResultName": "Scheduled Content"
        },
        "filterByFormula": "=AND(status = 'Scheduled', OR(linkedin_scheduled <= NOW(), twitter_scheduled <= NOW(), medium_scheduled <= NOW(), devto_scheduled <= NOW()))",
        "options": {}
      },
      "id": "get-due-content",
      "name": "Get Due Content",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2,
      "position": [
        460,
        900
      ],
      "credentials": {
        "airtableTokenApi": {
          "id": "airtable-api",
          "name": "Airtable API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Process scheduled content and post to due platforms\nconst items = $input.all();\nconst now = new Date();\nconst postsToMake = [];\n\nfor (const item of items) {\n  const content = item.json;\n  const formatted = JSON.parse(content.formatted_content_json || '{}');\n  \n  // Check each platform\n  const platforms = [];\n  \n  if (new Date(formatted.linkedin?.scheduled_time) <= now) {\n    platforms.push('linkedin');\n  }\n  if (new Date(formatted.twitter?.scheduled_time) <= now) {\n    platforms.push('twitter');\n  }\n  if (new Date(formatted.medium?.scheduled_time) <= now) {\n    platforms.push('medium');\n  }\n  if (new Date(formatted.devto?.scheduled_time) <= now) {\n    platforms.push('devto');\n  }\n  \n  if (platforms.length > 0) {\n    postsToMake.push({\n      json: {\n        ...content,\n        formatted_content: formatted,\n        platforms_to_post: platforms,\n        should_post_immediately: true\n      }\n    });\n  }\n}\n\nreturn postsToMake;"
      },
      "id": "process-scheduled-posts",
      "name": "Process Scheduled Posts",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        680,
        900
      ]
    },
    {
      "parameters": {
        "channel": "YOUR_SLACK_CHANNEL",
        "text": "=üì¢ *Content Published Successfully!*\n\n*Title:* {{ $json.title }}\n*Content ID:* {{ $json.content_id }}\n*Author:* {{ $json.author }}\n\n*Published to:*\n{{ $json.platforms_to_post ? $json.platforms_to_post.map(p => `‚úÖ ${p.toUpperCase()}`).join('\\n') : '‚úÖ All platforms' }}\n\n*Engagement Prediction:* {{ $json.engagement_prediction }}\n*Quality Score:* {{ $json.content_quality_score }}/100\n\n*Platform Links:*\n{{ $('Post to LinkedIn').first().json.id ? '‚Ä¢ LinkedIn: ' + $('Post to LinkedIn').first().json.id : '' }}\n{{ $('Post to Twitter (Thread Start)').first().json.id_str ? '‚Ä¢ Twitter: https://twitter.com/user/status/' + $('Post to Twitter (Thread Start)').first().json.id_str : '' }}\n{{ $('Post to Medium').first().json.data?.url ? '‚Ä¢ Medium: ' + $('Post to Medium').first().json.data.url : '' }}\n{{ $('Post to DEV.to').first().json.url ? '‚Ä¢ DEV.to: ' + $('Post to DEV.to').first().json.url : '' }}",
        "otherOptions": {}
      },
      "id": "notify-team-published",
      "name": "Notify Team (Published)",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.1,
      "position": [
        2220,
        200
      ],
      "credentials": {
        "slackApi": {
          "id": "slack-api",
          "name": "Slack API"
        }
      }
    },
    {
      "parameters": {
        "channel": "YOUR_SLACK_CHANNEL",
        "text": "=üìÖ *Content Scheduled for Publishing*\n\n*Title:* {{ $json.title }}\n*Content ID:* {{ $json.content_id }}\n*Author:* {{ $json.author }}\n*Content Type:* {{ $json.content_type }}\n\n*Scheduled Times:*\n‚Ä¢ LinkedIn: {{ new Date($json.formatted_content.linkedin.scheduled_time).toLocaleString() }}\n‚Ä¢ Twitter: {{ new Date($json.formatted_content.twitter.scheduled_time).toLocaleString() }}\n‚Ä¢ Medium: {{ new Date($json.formatted_content.medium.scheduled_time).toLocaleString() }}\n‚Ä¢ DEV.to: {{ new Date($json.formatted_content.devto.scheduled_time).toLocaleString() }}\n\n*Engagement Prediction:* {{ $json.engagement_prediction }}\n*Quality Score:* {{ $json.content_quality_score }}/100\n\n‚ú® Content will be published automatically at optimal times!",
        "otherOptions": {}
      },
      "id": "notify-team-scheduled",
      "name": "Notify Team (Scheduled)",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.1,
      "position": [
        2000,
        700
      ],
      "credentials": {
        "slackApi": {
          "id": "slack-api",
          "name": "Slack API"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ {\n  \"success\": true,\n  \"content_id\": $json.content_id,\n  \"status\": $json.should_post_immediately ? 'published' : 'scheduled',\n  \"platforms\": $json.platforms,\n  \"quality_score\": $json.content_quality_score,\n  \"engagement_prediction\": $json.engagement_prediction,\n  \"scheduled_times\": $json.formatted_content ? {\n    \"linkedin\": $json.formatted_content.linkedin.scheduled_time,\n    \"twitter\": $json.formatted_content.twitter.scheduled_time,\n    \"medium\": $json.formatted_content.medium.scheduled_time,\n    \"devto\": $json.formatted_content.devto.scheduled_time\n  } : {}\n} }}"
      },
      "id": "webhook-response",
      "name": "Webhook Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        2440,
        400
      ]
    },
    {
      "parameters": {
        "content": "## Content Distribution Hub\n\n**Write Once, Publish Everywhere!**\n\nüéØ **Features:**\n‚úÖ AI-optimized formatting per platform\n‚úÖ LinkedIn: Professional posts\n‚úÖ Twitter: Engaging threads\n‚úÖ Medium: Long-form articles\n‚úÖ DEV.to: Technical content\n‚úÖ Optimal posting times (AI-calculated)\n‚úÖ Schedule or publish immediately\n‚úÖ Track all content in Airtable\n‚úÖ Team notifications via Slack\n\n‚è∞ **Smart Scheduling:**\n- LinkedIn: 9 AM (B2B peak)\n- Twitter: 2 PM (engagement peak)\n- Medium: 6 AM (morning readers)\n- DEV.to: 10 AM (developer hours)\n\nüí∞ **Business Value:**\n- Save 10+ hours/week on content distribution\n- 3x engagement with optimized formatting\n- Never miss optimal posting times\n- Cross-platform consistency\n\n**Perfect for:**\n- Content creators\n- Marketing agencies\n- Developer advocates\n- Thought leaders\n- Startups",
        "height": 540,
        "width": 380
      },
      "id": "sticky-note",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        240,
        1100
      ]
    }
  ],
  "connections": {
    "Content Submission Webhook": {
      "main": [
        [
          {
            "node": "Normalize Content Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Normalize Content Data": {
      "main": [
        [
          {
            "node": "AI Content Analysis",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Content Analysis": {
      "main": [
        [
          {
            "node": "Content Processor",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Content Processor": {
      "main": [
        [
          {
            "node": "Format for LinkedIn",
            "type": "main",
            "index": 0
          },
          {
            "node": "Format for Twitter",
            "type": "main",
            "index": 0
          },
          {
            "node": "Format for Medium",
            "type": "main",
            "index": 0
          },
          {
            "node": "Format for DEV.to",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format for LinkedIn": {
      "main": [
        [
          {
            "node": "Merge Formatted Content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format for Twitter": {
      "main": [
        [
          {
            "node": "Merge Formatted Content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format for Medium": {
      "main": [
        [
          {
            "node": "Merge Formatted Content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format for DEV.to": {
      "main": [
        [
          {
            "node": "Merge Formatted Content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge Formatted Content": {
      "main": [
        [
          {
            "node": "Post Now or Schedule?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Post Now or Schedule?": {
      "main": [
        [
          {
            "node": "Post to LinkedIn",
            "type": "main",
            "index": 0
          },
          {
            "node": "Post to Twitter (Thread Start)",
            "type": "main",
            "index": 0
          },
          {
            "node": "Post to Medium",
            "type": "main",
            "index": 0
          },
          {
            "node": "Post to DEV.to",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Save Scheduled Content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Post to LinkedIn": {
      "main": [
        [
          {
            "node": "Save Published Content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Post to Twitter (Thread Start)": {
      "main": [
        [
          {
            "node": "Prepare Twitter Thread",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare Twitter Thread": {
      "main": [
        [
          {
            "node": "Save Published Content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Post to Medium": {
      "main": [
        [
          {
            "node": "Save Published Content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Post to DEV.to": {
      "main": [
        [
          {
            "node": "Save Published Content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save Published Content": {
      "main": [
        [
          {
            "node": "Notify Team (Published)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save Scheduled Content": {
      "main": [
        [
          {
            "node": "Notify Team (Scheduled)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Notify Team (Published)": {
      "main": [
        [
          {
            "node": "Webhook Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Notify Team (Scheduled)": {
      "main": [
        [
          {
            "node": "Webhook Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scheduled Content Checker": {
      "main": [
        [
          {
            "node": "Get Due Content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Due Content": {
      "main": [
        [
          {
            "node": "Process Scheduled Posts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Scheduled Posts": {
      "main": [
        [
          {
            "node": "Post Now or Schedule?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2025-01-08T00:00:00.000Z",
      "updatedAt": "2025-01-08T00:00:00.000Z",
      "id": "content-marketing",
      "name": "Content Marketing"
    },
    {
      "createdAt": "2025-01-08T00:00:00.000Z",
      "updatedAt": "2025-01-08T00:00:00.000Z",
      "id": "social-media",
      "name": "Social Media"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2025-01-08T00:00:00.000Z",
  "versionId": "1.0.0"
}
